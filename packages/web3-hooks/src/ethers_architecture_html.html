<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethers.js æ¶æ„å›¾ - è¯¦ç»†ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 20px;
            opacity: 0.9;
        }

        .architecture {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .module {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--module-color);
        }

        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .module-icon {
            font-size: 40px;
            margin-right: 15px;
        }

        .module-title {
            flex: 1;
        }

        .module-title h2 {
            font-size: 24px;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .module-title p {
            font-size: 14px;
            color: #718096;
        }

        .api-list {
            list-style: none;
        }

        .api-item {
            padding: 12px 15px;
            margin-bottom: 10px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 3px solid var(--module-color);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .api-item:hover {
            background: #edf2f7;
            transform: translateX(5px);
        }

        .api-item.expanded {
            background: #e6fffa;
            border-left-width: 5px;
        }

        .api-name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .api-desc {
            font-size: 13px;
            color: #718096;
            margin-bottom: 8px;
        }

        .api-details {
            display: none;
            margin-top: 15px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .api-details.visible {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section h4 {
            font-size: 14px;
            color: #4a5568;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .code-block {
            background: #1a202c;
            color: #68d391;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-width: 100%;
        }

        .code-block .keyword {
            color: #fc8181;
        }

        .code-block .string {
            color: #fbd38d;
        }

        .code-block .comment {
            color: #a0aec0;
            font-style: italic;
        }

        .params-list, .returns-list {
            font-size: 13px;
            color: #4a5568;
            line-height: 2;
            padding: 12px 15px;
            background: #f7fafc;
            border-radius: 6px;
        }

        .params-list code, .returns-list code {
            background: #edf2f7;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            color: #e53e3e;
            font-size: 12px;
        }

        .use-case {
            background: #fef5e7;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #744210;
            border-left: 4px solid #f6ad55;
            line-height: 1.6;
        }

        .best-practice {
            background: #e6fffa;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #234e52;
            border-left: 4px solid #38b2ac;
            margin-top: 12px;
            line-height: 1.6;
        }

        .warning {
            background: #fff5f5;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #742a2a;
            border-left: 4px solid #fc8181;
            margin-top: 12px;
            line-height: 1.6;
        }

        .frequency {
            display: inline-block;
            color: #f6ad55;
            font-size: 12px;
        }

        .expand-icon {
            font-size: 12px;
            color: #a0aec0;
            transition: transform 0.3s ease;
        }

        .api-item.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* æ¨¡å—é¢œè‰² */
        .provider { --module-color: #4299e1; }
        .signer { --module-color: #f6ad55; }
        .contract { --module-color: #9f7aea; }
        .utils { --module-color: #48bb78; }
        .wallet { --module-color: #fc8181; }
        .transaction { --module-color: #ed64a6; }

        .flow-diagram {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-top: 30px;
        }

        .flow-diagram h2 {
            text-align: center;
            font-size: 28px;
            color: #2d3748;
            margin-bottom: 30px;
        }

        .flow-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-box {
            padding: 20px 30px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .flow-arrow {
            font-size: 30px;
            color: #2d3748;
            font-weight: bold;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 16px;
            color: #718096;
        }

        .examples-section {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-top: 30px;
        }

        .examples-section h2 {
            font-size: 28px;
            color: #2d3748;
            margin-bottom: 30px;
            text-align: center;
        }

        .example-card {
            background: #f7fafc;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
        }

        .example-card h3 {
            font-size: 19px;
            color: #2d3748;
            margin-bottom: 20px;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .architecture {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 32px;
            }

            .flow-container {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Ethers.js æ¶æ„å›¾ - è¯¦ç»†ç‰ˆ</h1>
            <p>å…­å¤§æ ¸å¿ƒæ¨¡å—ä¸é«˜é¢‘APIé€ŸæŸ¥ | ç‚¹å‡» API æŸ¥çœ‹è¯¦ç»†è¯´æ˜</p>
        </div>

        <div class="architecture">
            <!-- Provider Layer -->
            <div class="module provider">
                <div class="module-header">
                    <div class="module-icon">ğŸŒ</div>
                    <div class="module-title">
                        <h2>Provider Layer</h2>
                        <p>è¿æ¥å±‚ - è¯»å–åŒºå—é“¾æ•°æ®ï¼ˆåªè¯»æ“ä½œï¼‰</p>
                    </div>
                </div>
                <ul class="api-list">
                    <li class="api-item" data-api="getBalance">
                        <div class="api-name">
                            <span>getBalance() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">æŸ¥è¯¢åœ°å€ä½™é¢</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>å‚æ•°ï¼š</strong><code>address: string</code> - é’±åŒ…åœ°å€<br>
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;bigint&gt;</code> - Wei å•ä½çš„ä½™é¢
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> provider = <span class="keyword">new</span> BrowserProvider(window.ethereum);
<span class="keyword">const</span> balance = <span class="keyword">await</span> provider.getBalance(<span class="string">"0x..."</span>);
console.log(formatEther(balance)); <span class="comment">// è¾“å‡º: "1.5" ETH</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>DApp é’±åŒ…ä½™é¢æ˜¾ç¤ºã€è½¬è´¦å‰ä½™é¢éªŒè¯ã€ä½™é¢ç›‘æ§å‘Šè­¦
                            </div>
                            <div class="best-practice">
                                <strong>âœ… æœ€ä½³å®è·µï¼š</strong>ä½¿ç”¨ formatEther() è½¬æ¢ä¸ºå¯è¯»æ ¼å¼ï¼Œå®šæœŸè½®è¯¢æ›´æ–°ä½™é¢
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="getBlockNumber">
                        <div class="api-name">
                            <span>getBlockNumber() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">è·å–å½“å‰æœ€æ–°åŒºå—å·</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>å‚æ•°ï¼š</strong>æ— <br>
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;number&gt;</code> - å½“å‰åŒºå—å·
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> blockNumber = <span class="keyword">await</span> provider.getBlockNumber();
console.log(<span class="string">`å½“å‰åŒºå—: ${blockNumber}`</span>); <span class="comment">// è¾“å‡º: "å½“å‰åŒºå—: 18500000"</span>

<span class="comment">// ç›‘å¬æ–°åŒºå—</span>
provider.on(<span class="string">"block"</span>, (blockNumber) => {
    console.log(<span class="string">`æ–°åŒºå—: ${blockNumber}`</span>);
});
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>æŸ¥è¯¢å†å²äº‹ä»¶ã€è®¡ç®—åŒºå—æ—¶é—´ã€ç›‘æ§é“¾åŒæ­¥çŠ¶æ€
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="getNetwork">
                        <div class="api-name">
                            <span>getNetwork() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">è·å–ç½‘ç»œä¿¡æ¯ï¼ˆchainId, nameï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;Network&gt;</code> - åŒ…å« chainId å’Œ name
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> network = <span class="keyword">await</span> provider.getNetwork();
console.log(network.chainId); <span class="comment">// 1 (Mainnet)</span>
console.log(network.name);     <span class="comment">// "homestead"</span>

<span class="comment">// æ£€æŸ¥ç½‘ç»œæ˜¯å¦æ­£ç¡®</span>
<span class="keyword">if</span> (network.chainId !== 1n) {
    <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"è¯·åˆ‡æ¢åˆ°ä»¥å¤ªåŠä¸»ç½‘"</span>);
}
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>éªŒè¯ç”¨æˆ·ç½‘ç»œã€å¤šé“¾ DApp åˆ‡æ¢ã€æ˜¾ç¤ºå½“å‰ç½‘ç»œçŠ¶æ€
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="getTransaction">
                        <div class="api-name">
                            <span>getTransaction() <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">æŸ¥è¯¢äº¤æ˜“è¯¦æƒ…ï¼ˆby hashï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>å‚æ•°ï¼š</strong><code>hash: string</code> - äº¤æ˜“å“ˆå¸Œ<br>
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;TransactionResponse&gt;</code>
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> tx = <span class="keyword">await</span> provider.getTransaction(<span class="string">"0xabc..."</span>);
console.log(tx.from);  <span class="comment">// å‘é€è€…åœ°å€</span>
console.log(tx.to);    <span class="comment">// æ¥æ”¶è€…åœ°å€</span>
console.log(tx.value); <span class="comment">// è½¬è´¦é‡‘é¢ (Wei)</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>äº¤æ˜“æµè§ˆå™¨ã€äº¤æ˜“è¯¦æƒ…å±•ç¤ºã€è°ƒè¯•äº¤æ˜“å¤±è´¥åŸå› 
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="getFeeData">
                        <div class="api-name">
                            <span>getFeeData() <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">è·å–å½“å‰ Gas ä»·æ ¼ï¼ˆEIP-1559ï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;FeeData&gt;</code> - gasPrice, maxFeePerGas ç­‰
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> feeData = <span class="keyword">await</span> provider.getFeeData();
console.log(feeData.maxFeePerGas);         <span class="comment">// æœ€å¤§ Gas ä»·æ ¼</span>
console.log(feeData.maxPriorityFeePerGas); <span class="comment">// çŸ¿å·¥å°è´¹</span>

<span class="comment">// ç”¨äºäº¤æ˜“</span>
<span class="keyword">const</span> tx = {
    to: <span class="string">"0x..."</span>,
    value: parseEther(<span class="string">"1.0"</span>),
    maxFeePerGas: feeData.maxFeePerGas,
    maxPriorityFeePerGas: feeData.maxPriorityFeePerGas
};
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>ä¼°ç®—äº¤æ˜“æˆæœ¬ã€Gas ä»·æ ¼ç›‘æ§ã€è‡ªåŠ¨è°ƒæ•´ Gas ç­–ç•¥
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Signer Layer -->
            <div class="module signer">
                <div class="module-header">
                    <div class="module-icon">âœï¸</div>
                    <div class="module-title">
                        <h2>Signer Layer</h2>
                        <p>ç­¾åå±‚ - ç®¡ç†ç§é’¥å’Œç­¾åï¼ˆå†™æ“ä½œï¼‰</p>
                    </div>
                </div>
                <ul class="api-list">
                    <li class="api-item" data-api="signMessage">
                        <div class="api-name">
                            <span>signMessage() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">ç­¾åä»»æ„æ¶ˆæ¯ï¼ˆç”¨äºèº«ä»½éªŒè¯ï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>å‚æ•°ï¼š</strong><code>message: string | Uint8Array</code><br>
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;string&gt;</code> - 65å­—èŠ‚ç­¾å
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> signer = <span class="keyword">await</span> provider.getSigner();
<span class="keyword">const</span> message = <span class="string">"ç™»å½•æˆæƒ: "</span> + Date.now();
<span class="keyword">const</span> signature = <span class="keyword">await</span> signer.signMessage(message);

<span class="comment">// éªŒè¯ç­¾å</span>
<span class="keyword">const</span> address = verifyMessage(message, signature);
console.log(<span class="string">`ç­¾åè€…: ${address}`</span>);
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>Web3 ç™»å½•ã€é“¾ä¸‹ç­¾åæˆæƒã€NFTç™½åå•éªŒè¯
                            </div>
                            <div class="warning">
                                <strong>âš ï¸ æ³¨æ„ï¼š</strong>æ°¸è¿œä¸è¦ç­¾åæœªçŸ¥å†…å®¹ï¼Œé˜²æ­¢é’“é±¼æ”»å‡»ï¼
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="sendTransaction">
                        <div class="api-name">
                            <span>sendTransaction() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">å‘é€äº¤æ˜“åˆ°åŒºå—é“¾</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ“ å‡½æ•°ç­¾å</h4>
                                <div class="params-list">
                                    <strong>å‚æ•°ï¼š</strong><code>tx: TransactionRequest</code><br>
                                    <strong>è¿”å›ï¼š</strong><code>Promise&lt;TransactionResponse&gt;</code>
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> signer = <span class="keyword">await</span> provider.getSigner();
<span class="keyword">const</span> tx = <span class="keyword">await</span> signer.sendTransaction({
    to: <span class="string">"0x..."</span>,
    value: parseEther(<span class="string">"1.0"</span>)
});

console.log(<span class="string">`äº¤æ˜“å“ˆå¸Œ: ${tx.hash}`</span>);
<span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait(); <span class="comment">// ç­‰å¾…ç¡®è®¤</span>
console.log(<span class="string">`Gas æ¶ˆè€—: ${receipt.gasUsed}`</span>);
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>ETH è½¬è´¦ã€åˆçº¦è°ƒç”¨ã€æ‰¹é‡è½¬è´¦
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="signTypedData">
                        <div class="api-name">
                            <span>signTypedData() <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">EIP-712 ç»“æ„åŒ–æ•°æ®ç­¾å</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> domain = {
    name: <span class="string">"MyDApp"</span>,
    version: <span class="string">"1"</span>,
    chainId: 1,
    verifyingContract: <span class="string">"0x..."</span>
};

<span class="keyword">const</span> types = {
    Transfer: [
        { name: <span class="string">"to"</span>, type: <span class="string">"address"</span> },
        { name: <span class="string">"amount"</span>, type: <span class="string">"uint256"</span> }
    ]
};

<span class="keyword">const</span> value = { to: <span class="string">"0x..."</span>, amount: 100n };
<span class="keyword">const</span> signature = <span class="keyword">await</span> signer.signTypedData(domain, types, value);
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>Permit æˆæƒã€é“¾ä¸‹è®¢å•ç­¾åã€æŠ•ç¥¨ç­¾å
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Contract Layer -->
            <div class="module contract">
                <div class="module-header">
                    <div class="module-icon">ğŸ“„</div>
                    <div class="module-title">
                        <h2>Contract Layer</h2>
                        <p>åˆçº¦å±‚ - æ™ºèƒ½åˆçº¦äº¤äº’</p>
                    </div>
                </div>
                <ul class="api-list">
                    <li class="api-item" data-api="contractCall">
                        <div class="api-name">
                            <span>contract.function() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">è°ƒç”¨åˆçº¦å‡½æ•°ï¼ˆè¯»/å†™ï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> abi = [<span class="string">"function balanceOf(address) view returns (uint)"</span>];
<span class="keyword">const</span> contract = <span class="keyword">new</span> Contract(<span class="string">"0x..."</span>, abi, provider);

<span class="comment">// è¯»å–ï¼ˆview å‡½æ•°ï¼‰</span>
<span class="keyword">const</span> balance = <span class="keyword">await</span> contract.balanceOf(<span class="string">"0x..."</span>);

<span class="comment">// å†™å…¥ï¼ˆéœ€è¦ signerï¼‰</span>
<span class="keyword">const</span> contractWithSigner = contract.connect(signer);
<span class="keyword">const</span> tx = <span class="keyword">await</span> contractWithSigner.transfer(<span class="string">"0x..."</span>, 100n);
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>è¯»å– Token ä½™é¢ã€NFT ä¿¡æ¯ã€æ‰§è¡Œåˆçº¦æ–¹æ³•
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="estimateGas">
                        <div class="api-name">
                            <span>estimateGas() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">ä¼°ç®—å‡½æ•°è°ƒç”¨çš„ Gas æ¶ˆè€—</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> gasEstimate = <span class="keyword">await</span> contract.transfer.estimateGas(
    <span class="string">"0x..."</span>,
    parseEther(<span class="string">"1.0"</span>)
);

console.log(<span class="string">`é¢„ä¼° Gas: ${gasEstimate}`</span>); <span class="comment">// ä¾‹å¦‚: 21000</span>

<span class="comment">// æ·»åŠ  20% ç¼“å†²</span>
<span class="keyword">const</span> gasLimit = gasEstimate * 120n / 100n;
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>æ˜¾ç¤ºé¢„ä¼°è´¹ç”¨ã€é¿å…äº¤æ˜“å¤±è´¥ã€ä¼˜åŒ– Gas ç­–ç•¥
                            </div>
                            <div class="best-practice">
                                <strong>âœ… æœ€ä½³å®è·µï¼š</strong>å®é™… gasLimit åº”è¯¥æ¯”ä¼°ç®—å€¼é«˜ 10-20%
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="eventListener">
                        <div class="api-name">
                            <span>on(event) <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">å®æ—¶ç›‘å¬åˆçº¦äº‹ä»¶</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="comment">// ç›‘å¬ Transfer äº‹ä»¶</span>
contract.on(<span class="string">"Transfer"</span>, (from, to, amount, event) => {
    console.log(<span class="string">`${from} -> ${to}: ${formatEther(amount)} ETH`</span>);
});

<span class="comment">// ç›‘å¬ç‰¹å®šåœ°å€çš„è½¬è´¦</span>
<span class="keyword">const</span> filter = contract.filters.Transfer(<span class="string">"0x..."</span>, <span class="keyword">null</span>);
contract.on(filter, (from, to, amount) => {
    console.log(<span class="string">"æ”¶åˆ°è½¬è´¦!"</span>);
});

<span class="comment">// å–æ¶ˆç›‘å¬</span>
contract.off(<span class="string">"Transfer"</span>);
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>å®æ—¶é€šçŸ¥ã€äº¤æ˜“ç›‘æ§ã€é“¾ä¸Šæ•°æ®åŒæ­¥
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="queryFilter">
                        <div class="api-name">
                            <span>queryFilter() <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">æŸ¥è¯¢å†å²äº‹ä»¶æ—¥å¿—</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="comment">// æŸ¥è¯¢æœ€è¿‘ 1000 ä¸ªåŒºå—çš„ Transfer äº‹ä»¶</span>
<span class="keyword">const</span> currentBlock = <span class="keyword">await</span> provider.getBlockNumber();
<span class="keyword">const</span> filter = contract.filters.Transfer();
<span class="keyword">const</span> events = <span class="keyword">await</span> contract.queryFilter(
    filter,
    currentBlock - 1000,
    currentBlock
);

events.forEach(event => {
    console.log(event.args); <span class="comment">// è§£æåçš„äº‹ä»¶å‚æ•°</span>
});
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>å†å²äº¤æ˜“è®°å½•ã€æ•°æ®åˆ†æã€å®¡è®¡è¿½è¸ª
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Utils Layer -->
            <div class="module utils">
                <div class="module-header">
                    <div class="module-icon">ğŸ”§</div>
                    <div class="module-title">
                        <h2>Utils Layer</h2>
                        <p>å·¥å…·å±‚ - ç¼–ç /è§£ç /æ ¼å¼åŒ–</p>
                    </div>
                </div>
                <ul class="api-list">
                    <li class="api-item" data-api="parseEther">
                        <div class="api-name">
                            <span>parseEther() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">ETH â†’ Wei è½¬æ¢</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">import</span> { parseEther, formatEther } <span class="keyword">from</span> <span class="string">"ethers"</span>;

<span class="keyword">const</span> weiValue = parseEther(<span class="string">"1.5"</span>);
console.log(weiValue); <span class="comment">// 1500000000000000000n</span>

<span class="keyword">const</span> ethValue = formatEther(weiValue);
console.log(ethValue); <span class="comment">// "1.5"</span>

<span class="comment">// ç”¨äºäº¤æ˜“</span>
<span class="keyword">await</span> signer.sendTransaction({
    to: <span class="string">"0x..."</span>,
    value: parseEther(<span class="string">"1.5"</span>) <span class="comment">// å‘é€ 1.5 ETH</span>
});
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>æ‰€æœ‰æ¶‰åŠ ETH æ•°é‡çš„åœ°æ–¹
                            </div>
                            <div class="warning">
                                <strong>âš ï¸ æ³¨æ„ï¼š</strong>åŒºå—é“¾ä¸Šæ‰€æœ‰æ•°å€¼éƒ½æ˜¯ Wei å•ä½ï¼Œå¿…é¡»è½¬æ¢ï¼
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="parseUnits">
                        <div class="api-name">
                            <span>parseUnits() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">è‡ªå®šä¹‰ç²¾åº¦è½¬æ¢ï¼ˆç”¨äº Tokenï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="comment">// USDT (6 decimals)</span>
<span class="keyword">const</span> usdtAmount = parseUnits(<span class="string">"100"</span>, 6);
console.log(usdtAmount); <span class="comment">// 100000000n</span>

<span class="comment">// DAI (18 decimals, åŒ ETH)</span>
<span class="keyword">const</span> daiAmount = parseUnits(<span class="string">"100"</span>, 18);

<span class="comment">// æ ¼å¼åŒ–å›æ¥</span>
console.log(formatUnits(usdtAmount, 6)); <span class="comment">// "100.0"</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>ERC20 Token è½¬è´¦ã€ç¨³å®šå¸æ“ä½œ
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="isAddress">
                        <div class="api-name">
                            <span>isAddress() <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">éªŒè¯åœ°å€æœ‰æ•ˆæ€§</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">import</span> { isAddress, getAddress } <span class="keyword">from</span> <span class="string">"ethers"</span>;

console.log(isAddress(<span class="string">"0x..."</span>));  <span class="comment">// true/false</span>
console.log(isAddress(<span class="string">"vitalik.eth"</span>)); <span class="comment">// false (ENS éœ€è¦è§£æ)</span>

<span class="comment">// æ ¼å¼åŒ–ä¸º Checksum åœ°å€</span>
<span class="keyword">const</span> checksumAddr = getAddress(<span class="string">"0xabc..."</span>);
console.log(checksumAddr); <span class="comment">// "0xAbC..." (å¤§å°å†™æ··åˆ)</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>ç”¨æˆ·è¾“å…¥éªŒè¯ã€è¡¨å•éªŒè¯ã€é˜²æ­¢æ— æ•ˆåœ°å€
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Wallet Layer -->
            <div class="module wallet">
                <div class="module-header">
                    <div class="module-icon">ğŸ’°</div>
                    <div class="module-title">
                        <h2>Wallet Layer</h2>
                        <p>é’±åŒ…å±‚ - åˆ›å»ºå’Œç®¡ç†é’±åŒ…</p>
                    </div>
                </div>
                <ul class="api-list">
                    <li class="api-item" data-api="createRandom">
                        <div class="api-name">
                            <span>Wallet.createRandom() <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">åˆ›å»ºéšæœºé’±åŒ…</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">import</span> { Wallet } <span class="keyword">from</span> <span class="string">"ethers"</span>;

<span class="comment">// åˆ›å»ºæ–°é’±åŒ…</span>
<span class="keyword">const</span> wallet = Wallet.createRandom();
console.log(wallet.address);       <span class="comment">// "0x..."</span>
console.log(wallet.privateKey);    <span class="comment">// "0x..." (ä¿å¯†!)</span>
console.log(wallet.mnemonic.phrase); <span class="comment">// "word1 word2 ..."</span>

<span class="comment">// è¿æ¥åˆ° Provider</span>
<span class="keyword">const</span> connectedWallet = wallet.connect(provider);
<span class="keyword">await</span> connectedWallet.sendTransaction({...});
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>é’±åŒ…åº”ç”¨ã€æµ‹è¯•è´¦å·ç”Ÿæˆã€æ‰¹é‡è´¦å·åˆ›å»º
                            </div>
                            <div class="warning">
                                <strong>âš ï¸ è­¦å‘Šï¼š</strong>ç§é’¥å’ŒåŠ©è®°è¯å¿…é¡»å®‰å…¨å­˜å‚¨ï¼Œæ³„éœ²åæ— æ³•æ‰¾å›ï¼
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="fromPhrase">
                        <div class="api-name">
                            <span>Wallet.fromPhrase() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">ä»åŠ©è®°è¯æ¢å¤é’±åŒ…</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> mnemonic = <span class="string">"test test test test test test test test test test test junk"</span>;
<span class="keyword">const</span> wallet = Wallet.fromPhrase(mnemonic);

<span class="comment">// æ´¾ç”Ÿä¸åŒè·¯å¾„çš„åœ°å€</span>
<span class="keyword">const</span> wallet0 = Wallet.fromPhrase(mnemonic, <span class="string">"m/44'/60'/0'/0/0"</span>);
<span class="keyword">const</span> wallet1 = Wallet.fromPhrase(mnemonic, <span class="string">"m/44'/60'/0'/0/1"</span>);
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>é’±åŒ…å¯¼å…¥ã€è´¦å·æ¢å¤ã€HD é’±åŒ…
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="encrypt">
                        <div class="api-name">
                            <span>wallet.encrypt() <span class="frequency">â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">åŠ å¯†é’±åŒ…ä¸º Keystore JSON</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> wallet = Wallet.createRandom();
<span class="keyword">const</span> password = <span class="string">"StrongPassword123!"</span>;

<span class="comment">// åŠ å¯†ï¼ˆè¾ƒæ…¢ï¼‰</span>
<span class="keyword">const</span> json = <span class="keyword">await</span> wallet.encrypt(password);
console.log(json); <span class="comment">// Keystore JSON å­—ç¬¦ä¸²</span>

<span class="comment">// è§£å¯†</span>
<span class="keyword">const</span> decrypted = <span class="keyword">await</span> Wallet.fromEncryptedJson(json, password);
console.log(decrypted.address === wallet.address); <span class="comment">// true</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>å®‰å…¨å­˜å‚¨ç§é’¥ã€å¯¼å‡ºé’±åŒ…æ–‡ä»¶
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Transaction Layer -->
            <div class="module transaction">
                <div class="module-header">
                    <div class="module-icon">ğŸ“</div>
                    <div class="module-title">
                        <h2>Transaction Layer</h2>
                        <p>äº¤æ˜“å±‚ - äº¤æ˜“ç®¡ç†å’Œç›‘æ§</p>
                    </div>
                </div>
                <ul class="api-list">
                    <li class="api-item" data-api="txWait">
                        <div class="api-name">
                            <span>tx.wait() <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">ç­‰å¾…äº¤æ˜“ç¡®è®¤ï¼ˆé»˜è®¤ 1 ä¸ªåŒºå—ï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> tx = <span class="keyword">await</span> signer.sendTransaction({...});
console.log(<span class="string">`äº¤æ˜“å·²å‘é€: ${tx.hash}`</span>);

<span class="comment">// ç­‰å¾… 1 ä¸ªç¡®è®¤</span>
<span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();

<span class="comment">// ç­‰å¾… 3 ä¸ªç¡®è®¤ï¼ˆæ›´å®‰å…¨ï¼‰</span>
<span class="keyword">const</span> receipt3 = <span class="keyword">await</span> tx.wait(3);

<span class="keyword">if</span> (receipt.status === 1) {
    console.log(<span class="string">"äº¤æ˜“æˆåŠŸ!"</span>);
} <span class="keyword">else</span> {
    console.log(<span class="string">"äº¤æ˜“å¤±è´¥!"</span>);
}
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>æ‰€æœ‰äº¤æ˜“åçš„ç¡®è®¤ã€æ˜¾ç¤ºäº¤æ˜“çŠ¶æ€
                            </div>
                            <div class="best-practice">
                                <strong>âœ… æœ€ä½³å®è·µï¼š</strong>å¤§é¢äº¤æ˜“ç­‰å¾… 3+ ç¡®è®¤ï¼Œå°é¢äº¤æ˜“ 1 ä¸ªç¡®è®¤å³å¯
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="receiptStatus">
                        <div class="api-name">
                            <span>receipt.status <span class="frequency">â­â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">äº¤æ˜“çŠ¶æ€ï¼ˆ1=æˆåŠŸ, 0=å¤±è´¥ï¼‰</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();

<span class="comment">// æ£€æŸ¥çŠ¶æ€</span>
<span class="keyword">if</span> (receipt.status === 1) {
    console.log(<span class="string">"âœ… æˆåŠŸ"</span>);
    console.log(<span class="string">`Gas: ${receipt.gasUsed}`</span>);
    console.log(<span class="string">`åŒºå—: ${receipt.blockNumber}`</span>);
} <span class="keyword">else</span> {
    console.log(<span class="string">"âŒ å¤±è´¥"</span>);
    <span class="comment">// æŸ¥çœ‹å¤±è´¥åŸå› </span>
    <span class="keyword">const</span> tx = <span class="keyword">await</span> provider.getTransaction(receipt.hash);
    <span class="comment">// åˆ†æ tx.data å’Œ logs</span>
}
                                </div>
                            </div>
                        </div>
                    </li>

                    <li class="api-item" data-api="receiptLogs">
                        <div class="api-name">
                            <span>receipt.logs <span class="frequency">â­â­â­â­</span></span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                        <div class="api-desc">äº¤æ˜“äº§ç”Ÿçš„äº‹ä»¶æ—¥å¿—</div>
                        <div class="api-details">
                            <div class="detail-section">
                                <h4>ğŸ’¡ ä»£ç ç¤ºä¾‹</h4>
                                <div class="code-block">
<span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();

<span class="comment">// è§£ææ‰€æœ‰ Transfer äº‹ä»¶</span>
<span class="keyword">const</span> transferEvents = receipt.logs
    .filter(log => log.topics[0] === transferEventTopic)
    .map(log => contract.interface.parseLog(log));

transferEvents.forEach(event => {
    console.log(<span class="string">`è½¬è´¦: ${event.args.from} -> ${event.args.to}`</span>);
    console.log(<span class="string">`é‡‘é¢: ${formatEther(event.args.amount)}`</span>);
});
                                </div>
                            </div>
                            <div class="use-case">
                                <strong>ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼š</strong>è§£æäº¤æ˜“ç»“æœã€è¿½è¸ªå¤šæ­¥æ“ä½œã€è°ƒè¯•åˆçº¦
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Data Flow Diagram -->
        <div class="flow-diagram">
            <h2>ğŸ“Š æ•°æ®æµå‘å›¾</h2>
            <div class="flow-container">
                <div class="flow-box provider" style="background: #4299e1;">
                    1. Provider<br>è¿æ¥åŒºå—é“¾èŠ‚ç‚¹
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-box signer" style="background: #f6ad55;">
                    2. Signer<br>è·å–ç­¾åæƒé™
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-box contract" style="background: #9f7aea;">
                    3. Contract<br>æ„é€ äº¤æ˜“æ•°æ®
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-box transaction" style="background: #ed64a6;">
                    4. Transaction<br>ç­‰å¾…ç¡®è®¤
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px; color: #718096; line-height: 2;">
                <p><strong>ğŸ’¡ æµç¨‹è¯´æ˜ï¼š</strong></p>
                <p>â‘  Provider æä¾›åªè¯»è®¿é—® â†’ â‘¡ Signer æ·»åŠ ç­¾åèƒ½åŠ› â†’ â‘¢ Contract å°è£…ä¸šåŠ¡é€»è¾‘ â†’ â‘£ Transaction è¿½è¸ªæ‰§è¡Œç»“æœ</p>
                <p><strong>ğŸ”§ Utils å’Œ Wallet æ˜¯è¾…åŠ©æ¨¡å—ï¼Œè´¯ç©¿æ•´ä¸ªæµç¨‹</strong></p>
            </div>
        </div>

        <!-- Practical Examples -->
        <div class="examples-section">
            <h2>ğŸ¯ å®Œæ•´å®æˆ˜æ¡ˆä¾‹</h2>

            <div class="example-card">
                <h3>æ¡ˆä¾‹ 1: DApp é’±åŒ…è¿æ¥</h3>
                <div class="code-block">
<span class="comment">// 1. æ£€æŸ¥æ˜¯å¦å®‰è£… MetaMask</span>
<span class="keyword">if</span> (!window.ethereum) {
    alert(<span class="string">"è¯·å®‰è£… MetaMask!"</span>);
    <span class="keyword">return</span>;
}

<span class="comment">// 2. åˆ›å»º Provider</span>
<span class="keyword">const</span> provider = <span class="keyword">new</span> BrowserProvider(window.ethereum);

<span class="comment">// 3. è¯·æ±‚è¿æ¥</span>
<span class="keyword">await</span> provider.send(<span class="string">"eth_requestAccounts"</span>, []);

<span class="comment">// 4. è·å– Signer</span>
<span class="keyword">const</span> signer = <span class="keyword">await</span> provider.getSigner();
<span class="keyword">const</span> address = <span class="keyword">await</span> signer.getAddress();
console.log(<span class="string">`å·²è¿æ¥: ${address}`</span>);

<span class="comment">// 5. è·å–ä½™é¢</span>
<span class="keyword">const</span> balance = <span class="keyword">await</span> provider.getBalance(address);
console.log(<span class="string">`ä½™é¢: ${formatEther(balance)} ETH`</span>);
                </div>
            </div>

            <div class="example-card">
                <h3>æ¡ˆä¾‹ 2: ERC20 Token è½¬è´¦</h3>
                <div class="code-block">
<span class="keyword">const</span> ERC20_ABI = [
    <span class="string">"function transfer(address to, uint amount) returns (bool)"</span>,
    <span class="string">"function balanceOf(address) view returns (uint)"</span>
];

<span class="keyword">const</span> tokenAddress = <span class="string">"0x..."</span>;
<span class="keyword">const</span> contract = <span class="keyword">new</span> Contract(tokenAddress, ERC20_ABI, signer);

<span class="comment">// 1. æŸ¥è¯¢ä½™é¢</span>
<span class="keyword">const</span> balance = <span class="keyword">await</span> contract.balanceOf(<span class="keyword">await</span> signer.getAddress());
console.log(<span class="string">`Token ä½™é¢: ${formatUnits(balance, 18)}`</span>);

<span class="comment">// 2. ä¼°ç®— Gas</span>
<span class="keyword">const</span> gasEstimate = <span class="keyword">await</span> contract.transfer.estimateGas(
    <span class="string">"0xRecipient..."</span>,
    parseUnits(<span class="string">"100"</span>, 18)
);

<span class="comment">// 3. å‘é€äº¤æ˜“</span>
<span class="keyword">const</span> tx = <span class="keyword">await</span> contract.transfer(
    <span class="string">"0xRecipient..."</span>,
    parseUnits(<span class="string">"100"</span>, 18),
    { gasLimit: gasEstimate * 120n / 100n } <span class="comment">// +20% ç¼“å†²</span>
);

console.log(<span class="string">`äº¤æ˜“å“ˆå¸Œ: ${tx.hash}`</span>);

<span class="comment">// 4. ç­‰å¾…ç¡®è®¤</span>
<span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();
<span class="keyword">if</span> (receipt.status === 1) {
    console.log(<span class="string">"âœ… è½¬è´¦æˆåŠŸ!"</span>);
}
                </div>
            </div>

            <div class="example-card">
                <h3>æ¡ˆä¾‹ 3: ç›‘å¬åˆçº¦äº‹ä»¶</h3>
                <div class="code-block">
<span class="keyword">const</span> contract = <span class="keyword">new</span> Contract(address, abi, provider);

<span class="comment">// å®æ—¶ç›‘å¬æ‰€æœ‰ Transfer äº‹ä»¶</span>
contract.on(<span class="string">"Transfer"</span>, (from, to, amount, event) => {
    console.log({
        from,
        to,
        amount: formatEther(amount),
        blockNumber: event.log.blockNumber,
        txHash: event.log.transactionHash
    });
});

<span class="comment">// ç›‘å¬ç‰¹å®šåœ°å€æ¥æ”¶çš„è½¬è´¦</span>
<span class="keyword">const</span> myAddress = <span class="string">"0x..."</span>;
<span class="keyword">const</span> filter = contract.filters.Transfer(<span class="keyword">null</span>, myAddress);
contract.on(filter, (from, to, amount) => {
    console.log(<span class="string">`æ”¶åˆ° ${formatEther(amount)} ETHï¼Œæ¥è‡ª ${from}`</span>);
    <span class="comment">// è§¦å‘é€šçŸ¥ã€æ›´æ–° UI ç­‰</span>
});

<span class="comment">// æ¸…ç†ç›‘å¬å™¨</span>
<span class="keyword">return</span> () => {
    contract.removeAllListeners();
};
                </div>
            </div>

            <div class="example-card">
                <h3>æ¡ˆä¾‹ 4: æ‰¹é‡æŸ¥è¯¢å†å²äº‹ä»¶</h3>
                <div class="code-block">
<span class="keyword">const</span> contract = <span class="keyword">new</span> Contract(address, abi, provider);
<span class="keyword">const</span> currentBlock = <span class="keyword">await</span> provider.getBlockNumber();

<span class="comment">// æŸ¥è¯¢æœ€è¿‘ 10000 ä¸ªåŒºå—çš„æ‰€æœ‰ Transfer äº‹ä»¶</span>
<span class="keyword">const</span> filter = contract.filters.Transfer();
<span class="keyword">const</span> events = <span class="keyword">await</span> contract.queryFilter(
    filter,
    currentBlock - 10000,
    currentBlock
);

console.log(<span class="string">`æ‰¾åˆ° ${events.length} ä¸ªè½¬è´¦äº‹ä»¶`</span>);

<span class="comment">// ç»Ÿè®¡æ¯ä¸ªåœ°å€çš„è½¬è´¦æ¬¡æ•°</span>
<span class="keyword">const</span> stats = {};
events.forEach(event => {
    <span class="keyword">const</span> from = event.args.from;
    stats[from] = (stats[from] || 0) + 1;
});

<span class="comment">// æ‰¾å‡ºæœ€æ´»è·ƒçš„åœ°å€</span>
<span class="keyword">const</span> mostActive = Object.entries(stats)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 10);

console.log(<span class="string">"Top 10 æ´»è·ƒåœ°å€:"</span>, mostActive);
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">6</div>
                <div class="stat-label">æ ¸å¿ƒæ¨¡å—</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">40+</div>
                <div class="stat-label">é«˜é¢‘API</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">ç±»å‹å®‰å…¨</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">v6</div>
                <div class="stat-label">å½“å‰ç‰ˆæœ¬</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">22</div>
                <div class="stat-label">Web3 Hooks</div>
            </div>
        </div>
    </div>

    <script>
        // API é¡¹ç‚¹å‡»å±•å¼€/æŠ˜å 
        document.querySelectorAll('.api-item').forEach(item => {
            item.addEventListener('click', function() {
                const details = this.querySelector('.api-details');
                const isExpanded = this.classList.contains('expanded');

                // å…ˆæŠ˜å æ‰€æœ‰å…¶ä»–é¡¹
                document.querySelectorAll('.api-item').forEach(other => {
                    if (other !== this) {
                        other.classList.remove('expanded');
                        other.querySelector('.api-details').classList.remove('visible');
                    }
                });

                // åˆ‡æ¢å½“å‰é¡¹
                if (isExpanded) {
                    this.classList.remove('expanded');
                    details.classList.remove('visible');
                } else {
                    this.classList.add('expanded');
                    details.classList.add('visible');
                }
            });
        });

        // æ¨¡å— hover æ•ˆæœ
        const modules = document.querySelectorAll('.module');
        modules.forEach(module => {
            module.addEventListener('mouseenter', function() {
                this.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
            });
        });

        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        console.log('%cğŸš€ Ethers.js æ¶æ„å›¾å·²åŠ è½½ï¼', 'color: #667eea; font-size: 20px; font-weight: bold;');
        console.log('%cğŸ’¡ ç‚¹å‡»ä»»æ„ API æŸ¥çœ‹è¯¦ç»†è¯´æ˜å’Œä»£ç ç¤ºä¾‹', 'color: #48bb78; font-size: 14px;');
    </script>
</body>
</html>
